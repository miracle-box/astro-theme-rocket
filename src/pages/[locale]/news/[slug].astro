---
import Layout from '@layouts/news-content.astro';
import { locales } from '@utils/i18n';
import { getCollection, getEntry } from 'astro:content';

export async function getStaticPaths() {
	const allNewsPosts = await getCollection('news');

	const pages = [];
	for (const locale of locales) {
		pages.push(
			...allNewsPosts.map(({ id, slug, data }) => {
				return { params: { locale, slug }, props: { id, data } };
			}),
		);
	}

	return pages;
}

// Render the content
const { id } = Astro.props;
const page = await getEntry('news', id);
const { Content } = await page!.render();
---

<Layout>
	<Content />
</Layout>
